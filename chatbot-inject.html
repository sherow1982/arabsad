<!— inject professional config and human-like behavior —>
<script src="assets/js/chatbot-config.js" defer></script>
<script>
  document.addEventListener('DOMContentLoaded', function(){
    // تحسين الردود لتبدو بشرية واحترافية
    const cfg = window.ARABSAD_CHATBOT_CONFIG || {};
    const wait = (min,max)=>new Promise(r=>setTimeout(r, Math.floor(Math.random()*(max-min+1))+min));
    // ربط الرسائل الصادرة من البوت بإعدادات النبرة
    const enhanceBot = ()=>{
      const chat = document.getElementById('ai-chatbot');
      if(!chat) return;
      chat.classList.add('bot-pro-tone');
      // تحسين التجربة: محاكاة كتابة بشرية عند إرسال رسائل البوت
      const origAdd = ArabSadAIChatbot.prototype.addBotMessage;
      ArabSadAIChatbot.prototype.addBotMessage = async function(message, actions){
        const typingEl = document.createElement('div');
        typingEl.className = 'message bot-message';
        typingEl.innerHTML = '<div class="message-content">يكتب…</div>';
        const container = document.getElementById('chatMessages');
        container.appendChild(typingEl);
        await wait((cfg.typingDelayMs||[200,500])[0], (cfg.typingDelayMs||[200,500])[1]);
        typingEl.remove();
        origAdd.call(this, message, actions);
      };
    };
    const tryInit = ()=>{ if(window.ArabSadAIChatbot){ enhanceBot(); } else { setTimeout(tryInit, 300);} };
    tryInit();
  });
</script>
<style>
  /* لا يغير شكل الموقع الخارجي، فقط داخل نافذة البوت */
  #ai-chatbot.bot-pro-tone .message.bot-message .message-content{ font-size: .95rem; line-height: 1.6; }
  #ai-chatbot.bot-pro-tone .message.user-message .message-content{ font-size: .95rem; }
</style>
